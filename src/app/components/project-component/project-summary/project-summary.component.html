<div class="p-6">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-semibold text-gray-800">Project Summary</h2>
    <button (click)="printReport()" class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clip-rule="evenodd" />
      </svg>
      Print
    </button>
  </div>

  <div class="flex gap-4 mb-6">
    <select [(ngModel)]="selectedYear" (ngModelChange)="filterProjects()" class="p-2 border rounded">
      <option value="">All Years</option>
      <option *ngFor="let year of years" [value]="year">{{ year }}</option>
    </select>
    <select [(ngModel)]="selectedMonth" (ngModelChange)="filterProjects()" class="p-2 border rounded">
      <option value="">All Months</option>
      <option *ngFor="let month of months" [value]="month">{{ month }}</option>
    </select>
    <select *ngIf="authService.isAdmin()" [(ngModel)]="selectedDivision" (ngModelChange)="filterProjects()" class="p-2 border rounded">
      <option value="">All Divisions</option>
      <option *ngFor="let division of divisions" [value]="division.id">{{ division.name }}</option>
    </select>
  </div>

  <div class="overflow-x-auto border rounded-lg shadow-sm">
    <table class="min-w-full text-sm text-left text-gray-700">
      <thead class="bg-gray-50 text-xs uppercase tracking-wide text-gray-500">
      <tr>
        <th class="px-4 py-3">Title</th>
        <th class="px-4 py-3">Category</th>
        <th class="px-4 py-3">Division</th>
        <th class="px-4 py-3">Start Date</th>
        <th class="px-4 py-3">End Date</th>
        <th class="px-4 py-3">Status</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let project of filteredProjects" class="border-t hover:bg-gray-100 transition">
        <td class="px-4 py-3">{{ project.title }}</td>
        <td class="px-4 py-3">{{ project.projectCategory?.name || 'N/A' }}</td>
        <td class="px-4 py-3">{{ project.division.name }}</td>
        <td class="px-4 py-3">{{ project.startDate | date:'mediumDate' }}</td>
        <td class="px-4 py-3">{{ project.endDate | date:'mediumDate' }}</td>
        <td class="px-4 py-3">{{ project.status }}</td>
      </tr>
      <tr *ngIf="filteredProjects.length === 0">
        <td colspan="6" class="text-center py-4 text-gray-500">No projects found for the selected filters.</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
